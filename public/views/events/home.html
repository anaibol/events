<section ng-controller="EventsCtrl" ng-init="find()">
  <table ng-table="tableParams" show-filter="true" class="table" template-pagination="custom/pager" pagination-top pagination-bottom>
    <tbody ng-repeat="event in $events">
    <tr class="event">
      <td title="'Image'" ng-click="edit(event)">
        <img class="image" src="{{event.pic_big}}">
      </td>
      <td title="'Name'" filter="{ 'name': 'text' }">
        <!--<a ng-href="#!/events/{{event._id}}">{{event.name}}</a>--><a target="_blank" href="https://facebook.com/{{event.eid}}">{{event.name}}</a>
      </td>

      <td title="'Date'" sortable="'date'" filter="{ 'date': 'date'}" class="time">{{event.date}}</td>
      <!--<td title="'End date'" sortable="'end_time'" class="time">{{event.end_time < event.start_time && event.end_time || '' | date:'EEE dd MMM HH:mm'}}</td>-->

      <td title="'Creator'" filter="{ 'creator': 'text' }" sortable="'creator.name'" class="creator">{{event.creator}}</td>
      <td title="'Description'" class="description">
        <pre>{{event.description}}</pre>
      </td>
      <td title="'Location'" filter="{ 'location': 'text' }" sortable="'location'" class="location">{{event.location}}</td>
      <td title="'City'" filter="{ 'city': 'text' }" sortable="'city'" class="city">{{event.city}}</td>
      <td title="'Country'" filter="{ 'country': 'text' }" sortable="'country'" class="country">{{event.country}}</td>
      <td title="'Attending'" sortable="'members.length'" class="members">{{event.members.length}}
        <input type=button id="editRowBtn{{p.id}}" value="edit"
                                      ng-click="setEditId(p.id)">
      </td>



      <!--<td title="'Privacy'" sortable="'privacy'" class="privacy">{{event.privacy}}</td>-->
      <!--<td class="map">
          <leaflet defaults="defaults" center="center" height="480px" width="640px"></leaflet>
        </td>-->
    </tr>
    <tr ng-show="editId===p.id" ng-if="editId===p.id">
        <td colspan="7">
          <table class="noborder">
              <tr>
                  <td rowspan="2">ID: {{p.id}}<input type="hidden" name="id" value="{{p.id}}"></td>
                  <td>Image:</td>
                  <td><input type="text" name="fn" class="w100" value="{{p.fn}}"></td>
                  <td>Name: </td>
                  <td>Date:</td>
                  <td><input type="text" name="em" class="w180" value="{{p.em}}"></td>
                  <td>Creator:</td>
                  <td><input type="text" name="ln" class="w100" value="{{p.ln}}"></td>
                  <td><input type="text" name="dc" class="w180" value="{{p.dc}}"></td>
                  <td>Description: </td>
                  <td><input type="text" name="ph" class="w120" value="{{p.ph}}"></td>
                  <td><input type="button" value=" save " onclick="alert('Save :)')"></td>                  
                  <td><input type="button" value=" cancel" ng-click="setEditId(-1)"></td>
              </tr>
          </table>
        </td>
    </tr>    
    </tbody>   
  </table>
  <script type="text/ng-template" id="custom/pager">
      <ul class="pager ng-cloak">
        <li ng-class="{'disabled': !page.active}" ng-repeat="page in pages" ng-switch="page.type">
          <a ng-switch-when="prev" ng-click="paginate(params, page.number)" href="">&laquo; Previous</a>
          <a ng-switch-when="first" ng-click="paginate(params, page.number)" href=""><span ng-bind="page.number"></span></a>
          <a ng-switch-when="page" ng-click="paginate(params, page.number)" href=""><span ng-bind="page.number"></span></a>
          <a ng-switch-when="more" ng-click="paginate(params, page.number)" href="">&#8230;</a>
          <a ng-switch-when="last" ng-click="paginate(params, page.number)" href=""><span ng-bind="page.number"></span></a>
          <a ng-switch-when="next" ng-click="paginate(params, page.number)" href="">Next &raquo;</a>
        </li>
        <li> 
          <div class="btn-group">
              <button type="button" ng-class="{'active':params.count() == 10}" ng-click="params.count(10)" class="btn btn-default">10</button>
              <button type="button" ng-class="{'active':params.count() == 25}" ng-click="params.count(25)" class="btn btn-default">25</button>
              <button type="button" ng-class="{'active':params.count() == 50}" ng-click="params.count(50)" class="btn btn-default">50</button>
              <button type="button" ng-class="{'active':params.count() == 100}" ng-click="params.count(100)" class="btn btn-default">100</button>
          </div>
        </li>
      </ul>
  </script>
  <script type="text/ng-template" id="ng-table/filters/date.html">
    <div class="form-group" ng-controller="DatepickerCtrl">
      <p class="input-group">
      <input type="text" class="form-control" name="filter-date" ng-model="date" datepicker-popup="{{format}}" min="minDate" datepicker-options="dateOptions" />
      <span class="input-group-btn">
        <button class="btn btn-default" ng-click="open(params)"><i class="glyphicon glyphicon-calendar"></i></button>
      </span>
      </p>
    </div>
  </script>  
</section>